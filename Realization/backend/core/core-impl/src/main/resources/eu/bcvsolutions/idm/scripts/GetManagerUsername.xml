<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
Returns manager's username for main contract or null if manager is not set.
-->
<script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="IdmScript.xsd">
  <code>GetManagerUsername</code>
  <name>GetManagerUsername</name>    
    <body><![CDATA[package eu.bcvsolutions.idm.scripts.rules;

import eu.bcvsolutions.idm.core.api.dto.IdmIdentityDto;

/**
 * code: GetManagerUsername
 * name: GetManagerUsername
 * desc: Returns manager's username for main contract or null if manager is not set.
 * authorities:
 * - eu.bcvsolutions.idm.core.api.dto.IdmIdentityDto
 *
 * @author Jan Helbich
 */
//
//
IdmIdentityDto manager = scriptEvaluator.evaluate(scriptEvaluator.newBuilder()
        .setScriptCode('GetManager')
        .addParameter('scriptEvaluator', scriptEvaluator)
        .addParameter('entity', entity)
        .build())
//
return manager == null ? null : manager.username
]]></body>
<type>groovy</type>
  <category>TRANSFORM_TO</category>
  <description>Returns manager's username for main contract or null if manager is not set.</description>
<allowClasses>
    <allowClass>
        <className>eu.bcvsolutions.idm.core.api.dto.IdmIdentityDto</className>
    </allowClass>
</allowClasses>
</script>
