<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
Returns AccAccount for provided identity and system.
-->
<script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="IdmScript.xsd">
  <code>GetIdentityAccAccount</code>
  <name>GetIdentityAccAccount</name>
  <body><![CDATA[package eu.bcvsolutions.idm.scripts.rules;

import eu.bcvsolutions.idm.acc.dto.AccAccountDto;

// Load account
def account = accAccountService.getAccount(uid,system.getId());
if(account){
    // Account was found. Return protection state.
    return account.isInProtection();
}
return false;]]></body>
<type>groovy</type>
  <category>TRANSFORM_TO</category>
  <description>Returns AccAccount for provided identity and system.
  Input: 
  String uid of accAccount-> uid
  sysSystemDto -> system</description>
    <services>
        <service>
            <name>accAccountService</name>
            <className>eu.bcvsolutions.idm.acc.service.impl.DefaultAccAccountService</className>            
        </service>
    </services>
    <allowClasses>
        <allowClass>
            <className>eu.bcvsolutions.idm.acc.dto.AccAccountDto</className>
        </allowClass>
        <allowClass>
            <className>eu.bcvsolutions.idm.acc.dto.SysSystemDto</className>
        </allowClass>
    </allowClasses>
</script>
